<!DOCTYPE html>
<html lang="en">
<head>
    <link href="./../css/bootstrap.min.css" rel="stylesheet">
    <link href="./../css/style.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@100;500;900&display=swap" rel="stylesheet">
    <title>Chenab Gas Agency</title>
</head>
<body style="background-color: #333333;font-family: 'Roboto', sans-serif;">


    <div class="main-body-wrapper" style="display: flex;color: #ffffff;padding: 0% 2%;">

        <div style="display: flex;width: 35%;border-right: 5px solid #ffffff;position: fixed;height: 100vh;flex-direction: column;">

            <!-- FIRST ROW OF DIVS (ASSETS, STOCK, MARKET) -->
            <div style="display: flex;justify-content: space-around;align-items: baseline;margin-top: 20px">

                <div class="">
                    <h2>Assets</h2>
                    <p id="assets-number-of-cylinders-11-kg"></p>
                    <p id="assets-number-of-cylinders-15-kg"></p>
                    <p id="assets-number-of-cylinders-45-kg"></p>
                    <div>
                        <button class="btn btn-primary" onclick="showBuyAssetsDiv()">Buy Assets</button>
                    </div>
                    <div class="mt-2">
                        <button class="btn btn-primary" onclick="showAssetsDetailsDiv()">Asset Details</button>
                    </div>
                    <div class="mt-2">
                        <button class="btn btn-primary" onclick="showAssetsDetailsDiv()" style="background-color: red;" disabled>View Assets History</button>
                    </div>

                </div>

                <div class="stock-tab-wrapper">
                    <h2>Stock</h2>
                    <p id="stock-number-of-cylinders-11-kg"></p>
                    <p id="stock-number-of-cylinders-15-kg"></p>
                    <p id="stock-number-of-cylinders-45-kg"></p>
                    <button id="stock-details-btn" class="btn btn-primary" onclick="showStockDetailsDiv()">Stock Details</button>
                </div>

                <div class="market-money-tab-wrapper">
                    <h2>Market</h2>
                    <p id="market-number-of-cylinders-11-kg"></p>
                    <p id="market-number-of-cylinders-15-kg"></p>
                    <p id="market-number-of-cylinders-45-kg"></p>
                    <button id="market-details-btn" class="btn btn-primary" onclick="showMarketDetailsDiv()">Market Details</button>
                </div>

            </div>

            <!-- SECOND ROW OF DIVS (MARKET MONEY, PLANT MONEY, PROFIT MONEY) -->
            <div style="display: flex;justify-content: space-around;" class="mt-5">
                <div>
                    <h4 style="font-size: 18px;">Market Money</h4>
                    <p id="total-money-in-market"></p>
                </div>
                <div>
                    <h4 style="font-size: 18px;">Plant Money</h4>
                    <p id="plant-money-chenab"></p>
                    <p id="plant-money-super"></p>
                </div>
                <div>
                    <h4 style="font-size: 18px;">Profit Money</h4>
                    <p id="this-month-profit"></p>
                </div>

            </div>


            <!-- THIRD ROW OF DIVS (CUSTOMER'S, PLANT, EXPENSES, REPORT) -->
            <div style="display: flex;justify-content: space-around;">
                <div class="market-money-tab-wrapper mt-5">
                    <h4>Customer's</h4>
                    <div>
                        <button class="btn btn-primary" onclick="showAddNewCustomerDiv()">Add Customer</button>
                    </div>
                    <div>
                        <button class="btn btn-primary mt-2" onclick="showSaleGasToCustomerDiv()">Sale Cylinder</button>
                    </div>
                    <div>
                        <button class="btn btn-primary mt-2" onclick="showReceivePaymentDiv()">Receive Payment</button>
                    </div>
                    <div>
                        <button class="btn btn-primary mt-2" onclick="showReceiveCylindersDiv()">Receive Cylinders</button>
                    </div>
                    <div>
                        <button class="btn btn-primary mt-2" onclick="showCustomerDetailsDiv()">Customer Details</button>
                    </div>
                </div>

                <div class="plant-money-tab-wrapper mt-5">
                    <h4>Plant</h4>
                    <div>
                        <button id="buy-gas-btn" class="btn btn-primary" onclick="showBuyGasDiv()">Buy Gas</button>
                    </div>
                    <div class="mt-2">
                        <button id="pay-plant-money-btn" class="btn btn-primary" onclick="showPayPlantMoneyDiv()">Pay Plant Money</button>
                    </div>
                    <div class="mt-2">
                        <button id="view-buy-history-btn" class="btn btn-primary" onclick="showViewBuyHistoryDiv()">View Buy History</button>
                    </div>
                    <div class="mt-2">
                        <button id="view-payment-history-btn" class="btn btn-primary" onclick="showPaymentHistoryDiv()">View Payment History</button>
                    </div>
                </div>

                <div class="mt-5">
                    <h4>Expenses</h4>
                    <div class="mt-2">
                        <button class="btn btn-primary" onclick="showAddExpenseDiv()">Add Expense</button>
                    </div>
                    <div class="mt-2">
                        <button class="btn btn-primary" onclick="showExpenseHistoryDiv()">View Expense History</button>
                    </div>
                    <h4 class="mt-2">Report</h4>
                    <div>
                        <button class="btn btn-primary" onclick="showReportHistoryDiv()">View Report</button>
                    </div>
                </div>
            </div>

            <!-- UPLOAD BTN -->
            <div class="mb-4" style="position: absolute;bottom: 0;left: 5%">
                <button class="btn btn-primary" style="background-color: darkgreen; border: none;" onclick="uploadData()">Upload Data</button>
            </div>

        </div>

        <div id="hidden-divs-wrapper" style="width: 63%;position: absolute;right: 0px;">

            <div style="width: 100%;display: none;justify-content: center;flex-direction: column;
                align-items: center;align-self: baseline;margin-top: 20px" id="buy-assets-div">
                    <!-- BUY ASSETS DIV -->
            </div>

            <div style="width: 100%;display: none;justify-content: center;flex-direction: column;
                align-items: center;align-self: baseline;margin-top: 20px" id="assets-details-div">
                    <!-- ASSETS DETAILS DIV -->
            </div>

            <div style="width: 100%;display: none;justify-content: center;flex-direction: column;
                align-items: center;align-self: baseline;margin-top: 20px" id="buy-gas-div">
                    <!-- BUY GAS DIV -->
            </div>

            <div style="width: 100%;display: none;justify-content: center;flex-direction: column;
                color: #ffffff;align-self: baseline;margin-top: 20px" id="view-buy-history-div">
                    <!-- BUY HISTORY DIV -->
            </div>

            <div style="width: 100%;display: none;justify-content: center;flex-direction: column;
                color: #ffffff;align-self: baseline;margin-top: 20px" id="pay-plant-money-div">
                    <!-- PAY PLANT MONEY DIV -->
            </div>

            <div style="width: 100%;display: none;justify-content: center;flex-direction: column;
                color: #ffffff;align-self: baseline;margin-top: 20px" id="view-payment-history-div">
                    <!-- PAYMENT HISTORY DIV -->
            </div>

            <div style="width: 100%;display: none;justify-content: center;flex-direction: column;
                color: #ffffff;align-self: baseline;margin-top: 20px" id="add-new-customer-div">
                    <!-- ADD NEW CUSTOMER DIV -->
            </div>

            <div style="width: 100%;display: none;justify-content: center;flex-direction: column;
                color: #ffffff;align-self: baseline;align-items: center;margin-top: 20px" id="sale-gas-to-customer-div">
                    <!-- SALE GAS TO CUSTOMER -->
            </div>

            <div style="width: 100%;display: none;justify-content: center;flex-direction: column;
                color: #ffffff;align-self: baseline;align-items: center;margin-top: 20px" id="stock-details-div">
                    <!-- STOCK DETAILS DIV -->
            </div>

            <div style="width: 100%;display: none;justify-content: center;flex-direction: column;
                color: #ffffff;align-self: baseline;align-items: center;margin-top: 20px" id="market-details-div">
                    <!-- MARKET DETAILS DIV -->
            </div>

            <div style="width: 100%;display: none;justify-content: center;flex-direction: column;
                color: #ffffff;align-self: baseline;align-items: center;margin-top: 20px" id="receive-payment-div">
                    <!-- RECEIVE PAYMENT DIV -->
            </div>

            <div style="width: 100%;display: none;justify-content: center;flex-direction: column;
                color: #ffffff;align-self: baseline;align-items: center;margin-top: 20px" id="receive-cylinders-div">
                    <!-- RECEIVE CYLINDERS DIV -->
            </div>

            <div style="width: 100%;display: none;justify-content: center;flex-direction: column;
                color: #ffffff;align-self: baseline;align-items: center;margin-top: 20px" id="customer-details-div">
                    <!-- CUSTOMER DETAILS DIV -->
            </div>

            <div style="width: 100%;display: none;justify-content: center;flex-direction: column;
                color: #ffffff;align-self: baseline;align-items: center;margin-top: 20px" id="report-history-div">
                    <!-- REPORT HISTORY DIV -->
            </div>

            <div style="width: 100%;display: none;justify-content: center;flex-direction: column;
                color: #ffffff;align-self: baseline;align-items: center;margin-top: 20px" id="add-expenses-div">
                    <!-- ADD EXPENSES DIV -->
            </div>

            <div style="width: 100%;display: none;justify-content: center;flex-direction: column;
                color: #ffffff;align-self: baseline;align-items: center;margin-top: 20px" id="expense-history-div">
                    <!-- EXPENSES HISTORY DIV -->
            </div>

        </div>

        <!-- payment history modal -->
        <div class="modal fade" id="edit-payment-history-table-modal" tabindex="-1" role="dialog" aria-hidden="true">
            <div class="modal-dialog">
              <div class="modal-content" style="color: black;">
                <div class="modal-header">
                  <h5 class="modal-title">Edit Payment History</h5>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
                <div class="modal-body">
                    <span id="edit-payment-history-id"></span>
                    <div style="display: flex;justify-content: center;align-items: baseline;">
                        <div class="mr-3"><p>Date</p></div>
                        <input type="date" id="edit-payment-history-date">
                    </div>
                    <div class="mt-3" style="display: flex;justify-content: center;align-items: baseline;">
                        <div class="mr-3"><p>Amount</p></div>
                        <input type="number" id="edit-payment-history-amount" oninput="validity.valid||(value='');" min="0">
                    </div>
                </div>
                <div class="modal-footer">
                    <span id="edit-payment-history-mode"></span>
                    <button type="button" class="btn btn-secondary" id="edit-payment-history-close-btn" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" id="edit-payment-history-confirm-btn" disabled onclick="updateEditPaymentHistory()">Save changes</button>
                </div>
              </div>
            </div>
          </div>


          <!-- buy history modal -->
          <div class="modal fade" id="edit-buy-history-table-modal" tabindex="-1" role="dialog" aria-hidden="true">
            <div class="modal-dialog">
              <div class="modal-content" style="color: black;">
                <div class="modal-header">
                  <h5 class="modal-title">Edit Buy History</h5>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
                <div class="modal-body" style="display: flex;flex-direction: column;justify-content: center;align-items: center;">
                    <span id="edit-buy-history-id"></span>
                    <span id="edit-buy-history-mode"></span>
                    <div class="mt-3" style="display: flex;flex-direction: column;justify-content: center;
                        text-align: center;align-items: flex-end;" id="edit-buy-history-menu">
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" id="edit-buy-history-close-btn" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" id="edit-buy-history-confirm-btn" disabled onclick="updateEditBuyHistory()">Save changes</button>
                </div>
              </div>
            </div>
          </div>


          <!-- edit sale history modal -->
          <div class="modal fade" id="edit-sale-history-table-modal" tabindex="-1" role="dialog" aria-hidden="true">
            <div class="modal-dialog">
              <div class="modal-content" style="color: black;">
                <div class="modal-header">
                  <h5 class="modal-title">Edit Sale History</h5>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
                <div class="modal-body" style="display: flex;flex-direction: column;justify-content: center;align-items: center;">
                    <div class="mt-3" style="display: flex;flex-direction: column;justify-content: center;
                        text-align: center;align-items: flex-end;" id="edit-sale-history-menu">
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" id="edit-sale-history-close-btn" data-dismiss="modal">Close</button>
                    <button type="submit" class="btn btn-primary" id="edit-sale-history-confirm-btn" style="background-color: red;" disabled onclick="updateEditSaleHistory()">Save changes</button>
                </div>
              </div>
            </div>
          </div>

          <!-- company details modal -->
          <div class="modal fade" id="company-details-modal" tabindex="-1" role="dialog" aria-hidden="true">
            <div class="modal-dialog">
              <div class="modal-content" style="color: black;">
                <div class="modal-header">
                  <h5 class="modal-title">Company Details</h5>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
                <div class="modal-body" style="display: flex;flex-direction: column;justify-content: center;align-items: center;">
                    <div class="mt-3" style="display: flex;flex-direction: column;justify-content: center;
                        text-align: center;align-items: flex-end;" id="company-details-menu">
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" id="company-details-close-btn" data-dismiss="modal">Close</button>
                    <button type="submit" class="btn btn-primary" onclick="updateCompanyDetails()">Save changes</button>
                </div>
              </div>
            </div>
          </div>


          <!-- company payment modal -->
          <div class="modal fade" id="edit-company-payment-modal" tabindex="-1" role="dialog" aria-hidden="true">
            <div class="modal-dialog">
              <div class="modal-content" style="color: black;">
                <div class="modal-header">
                  <h5 class="modal-title">Edit Company Payment</h5>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
                <div class="modal-body" style="display: flex;flex-direction: column;justify-content: center;align-items: center;">
                    <div class="mt-3" style="display: flex;flex-direction: column;justify-content: center;
                        text-align: center;align-items: flex-end;" id="edit-company-payment-menu">
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" id="edit-sale-history-close-btn" data-dismiss="modal">Close</button>
                    <button type="submit" class="btn btn-primary" id="edit-sale-history-confirm-btn" style="background-color: red;" disabled onclick="">Save changes</button>
                </div>
              </div>
            </div>
          </div>

    </div>

    <script src="./../js/jquery.min.js"></script>
    <script src="./../js/jquery-3.5.1.slim.min.js"></script>
    <script src="./../js/bootstrap.min.js"></script>
    <script src="./../js/popper.min.js"></script>

    <script>
        let { remote, ipcRenderer } = require('electron')
        win = remote.getCurrentWindow()
        dialog = remote.dialog

        ipcRenderer.on('file-uploaded-successfully', (event, message) => {
            let options = {
                type: 'info',
                buttons: ['Okay'],
                message: 'File Uploaded Successfully',
                normalizeAccessKeys: true
            }
            dialog.showMessageBox(options, i => {
                if (i == 0) {
                    return
                }
            })
        })

        function uploadData() {
            ipcRenderer.send('upload-data', 'start-upload')
        }
    </script>

    <script src="./../js/buy-assets-div.js"></script>
    <script src="./../js/assets-details-div.js"></script>
    <script src="./../js/buy-gas-div.js"></script>
    <script src="./../js/pay-plant-money-div.js"></script>
    <script src="./../js/buy-history-div.js"></script>
    <script src="./../js/payment-history-div.js"></script>
    <script src="./../js/add-new-customer-div.js"></script>
    <script src="./../js/sale-gas-to-customer.js"></script>
    <script src="./../js/stock-details-div.js"></script>
    <script src="./../js/market-details-div.js"></script>
    <script src="./../js/receive-payment-div.js"></script>
    <script src="./../js/receive-cylinders-div.js"></script>
    <script src="./../js/customer-details-div.js"></script>
    <script src="./../js/add-expenses-div.js"></script>
    <script src="./../js/report-history-div.js"></script>
    <script src="./../js/expense-history-div.js"></script>
    <script src="./../database/DatabaseQueries.js" type="text/javascript"></script>
    <script src="./../js/util.js" type="text/javascript"></script>

    <script>
        // run these functions only once when app loads
        let allDivs = []

        allDivs.push($('#buy-assets-div')[0])
        allDivs.push($('#assets-details-div')[0])
        allDivs.push($('#buy-gas-div')[0])
        allDivs.push($('#view-buy-history-div')[0])
        allDivs.push($('#stock-details-div')[0])
        allDivs.push($('#pay-plant-money-div')[0])
        allDivs.push($('#view-payment-history-div')[0])
        allDivs.push($('#add-new-customer-div')[0])
        allDivs.push($('#sale-gas-to-customer-div')[0])
        allDivs.push($('#stock-details-div')[0])
        allDivs.push($('#market-details-div')[0])
        allDivs.push($('#receive-payment-div')[0])
        allDivs.push($('#receive-cylinders-div')[0])
        allDivs.push($('#customer-details-div')[0])
        allDivs.push($('#add-expenses-div')[0])
        allDivs.push($('#report-history-div')[0])
        allDivs.push($('#expense-history-div')[0])

        updateMainWindowGUI()
    </script>

</body>
</html>